(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[815],{5812:function(e,t,r){Promise.resolve().then(r.bind(r,7509))},7509:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(3827),s=r(4090);let l={nodes:[{id:"1",label:"人工知能",description:"人間の知能を模倣するコンピュータシステム",category:"technology",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),color:"#4299e1"},{id:"2",label:"機械学習",description:"データから学習するアルゴリズム",category:"technology",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),color:"#4299e1"},{id:"3",label:"ニューラルネットワーク",description:"脳の神経回路を模倣した学習モデル",category:"technology",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),color:"#4299e1"},{id:"4",label:"データサイエンス",description:"データから知見を得るための学問",category:"discipline",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),color:"#ed8936"},{id:"5",label:"自然言語処理",description:"人間の言語をコンピュータで処理する技術",category:"technology",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),color:"#4299e1"},{id:"6",label:"ディープラーニング",description:"多層ニューラルネットワークによる学習手法",category:"technology",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),color:"#4299e1"},{id:"7",label:"コンピュータビジョン",description:"画像認識や物体検出などの視覚情報処理",category:"technology",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),color:"#4299e1"}],links:[{source:"1",target:"2",label:"包含する",strength:.8},{source:"2",target:"3",label:"使用する",strength:.7},{source:"2",target:"6",label:"発展した",strength:.9},{source:"3",target:"6",label:"基盤となる",strength:.9},{source:"1",target:"5",label:"応用分野",strength:.6},{source:"1",target:"7",label:"応用分野",strength:.6},{source:"4",target:"2",label:"活用する",strength:.7},{source:"6",target:"5",label:"使用される",strength:.8},{source:"6",target:"7",label:"使用される",strength:.8}]};var n=r(5599);function d(e){let{data:t,onSelectNode:r}=e,l=(0,s.useRef)(null),d=(0,s.useRef)(null),[o,c]=(0,s.useState)(null),[i,g]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(!l.current||!t.nodes.length)return;let e=l.current.getBoundingClientRect(),a=e.width,s=e.height,o=d.current;o?n.Ys(o).selectAll("*").remove():(o=n.Ys(l.current).append("svg").attr("width",a).attr("height",s).attr("viewBox",[0,0,a,s]).attr("style","max-width: 100%; height: auto;").node(),d.current=o);let i=n.sPX().scaleExtent([.1,4]).on("zoom",e=>{x.attr("transform",e.transform.toString())});n.Ys(o).call(i);let x=n.Ys(o).append("g").attr("class","graph-container"),u=t.nodes.map(e=>({...e,x:a/2+(Math.random()-.5)*100,y:s/2+(Math.random()-.5)*100})),h=t.links.map(e=>({source:e.source,target:e.target,label:e.label})),y=x.append("g").attr("class","links").selectAll("line").data(h).enter().append("line").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",1.5),m=x.append("g").attr("class","nodes").selectAll(".node").data(u).enter().append("g").attr("class","node").call(n.ohM().on("start",function(e,t){e.active||p.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",function(e,t){t.fx=e.x,t.fy=e.y}).on("end",function(e,t){e.active||p.alphaTarget(0),e.sourceEvent.shiftKey||(t.fx=null,t.fy=null)}));m.append("circle").attr("r",e=>(function(e){switch(e.category){case"technology":return 9.6;case"concept":case"place":return 8.8;case"person":default:return 8;case"organization":return 10.4;case"event":return 7.2}})(e)).attr("fill",e=>e.color||function(e){switch(e){case"technology":return"#3B82F6";case"concept":return"#10B981";case"person":return"#F59E0B";case"organization":return"#6366F1";case"event":return"#EC4899";case"place":return"#8B5CF6";case"discipline":return"#7C3AED";default:return"#4299e1"}}(e.category)).attr("stroke","#fff").attr("stroke-width",1.5),m.append("text").attr("dx",12).attr("dy",".35em").text(e=>e.label).attr("class","text-sm fill-current text-gray-800 dark:text-gray-200").style("pointer-events","none"),m.on("click",(e,a)=>{e.stopPropagation();let s=t.nodes.find(e=>e.id===a.id);s&&(c(s),r&&r(s))});let p=n.A4v(u).force("link",n.Fsl(h).id(e=>e.id).distance(100)).force("charge",n.q5i().strength(-300)).force("center",n.wqt(a/2,s/2)).force("x",n.RUJ(a/2).strength(.1)).force("y",n.Mrm(s/2).strength(.1)).force("collision",n.Hh().radius(30)).on("tick",function(){y.attr("x1",e=>e.source.x||0).attr("y1",e=>e.source.y||0).attr("x2",e=>e.target.x||0).attr("y2",e=>e.target.y||0),m.attr("transform",e=>"translate(".concat(e.x||0,",").concat(e.y||0,")")),n.Ys(o).selectAll(".link-labels text").data(h.filter(e=>e.label)).attr("x",e=>((e.source.x||0)+(e.target.x||0))/2).attr("y",e=>((e.source.y||0)+(e.target.y||0))/2)});return g(p),x.append("g").attr("class","link-labels").selectAll("text").data(h.filter(e=>e.label)).enter().append("text").attr("class","text-xs fill-current text-gray-600 dark:text-gray-400").attr("text-anchor","middle").attr("dy",-3).text(e=>e.label||""),()=>{p.stop()}},[t,r]),(0,a.jsxs)("div",{className:"h-full w-full flex",children:[(0,a.jsx)("div",{ref:l,className:"flex-1 bg-gray-50 dark:bg-gray-900 bg-opacity-75 dark:bg-opacity-75 relative overflow-hidden",children:0===t.nodes.length&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-center text-gray-500 dark:text-gray-400",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"表示するノードがありません。"}),(0,a.jsx)("p",{className:"mt-2",children:"検索条件を変更するか、新しいノードを作成してください。"})]})})}),(0,a.jsxs)("div",{className:"w-64 p-4 border-l border-gray-200 dark:border-gray-800",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"ノード詳細"}),o?o?(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:o.label}),o.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:o.description}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["カテゴリ: ",o.category||"未分類"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["作成: ",new Date(o.createdAt).toLocaleDateString()]})]}):null:(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ノードをクリックすると詳細が表示されます"})]})]})}function o(e){let{children:t,title:r,onClose:l}=e;return(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&l()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l]),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:e=>{e.target===e.currentTarget&&l()},children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:r}),(0,a.jsxs)("button",{type:"button",className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",onClick:l,children:[(0,a.jsx)("span",{className:"sr-only",children:"閉じる"}),(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-[calc(90vh-8rem)]",children:t})]})})}function c(){let[e,t]=(0,s.useState)(""),[r,n]=(0,s.useState)("graph"),[c,i]=(0,s.useState)(l),[g,x]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[y,m]=(0,s.useState)(!1),p=c.nodes.filter(t=>t.label.toLowerCase().includes(e.toLowerCase())||t.description&&t.description.toLowerCase().includes(e.toLowerCase())||t.category&&t.category.toLowerCase().includes(e.toLowerCase())),b=p.map(e=>e.id),f=c.links.filter(e=>b.includes(e.source)&&b.includes(e.target)),k=e=>{y&&u?i(t=>({...t,nodes:t.nodes.map(t=>t.id===e.id?e:t)})):i(t=>({...t,nodes:[...t.nodes,e]})),x(!1),h(null),m(!1)},v=e=>{i(t=>({nodes:t.nodes.filter(t=>t.id!==e),links:t.links.filter(t=>t.source!==e&&t.target!==e)})),h(null)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 md:mb-0",children:"知識グラフ"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"ノードを検索...",className:"w-full md:w-64 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:e,onChange:e=>t(e.target.value)}),e&&(0,a.jsx)("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>t(""),children:"✕"})]}),(0,a.jsxs)("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[(0,a.jsx)("button",{className:"px-3 py-1 rounded-md text-sm ".concat("graph"===r?"bg-white dark:bg-gray-600 shadow-sm text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),onClick:()=>n("graph"),children:"グラフ"}),(0,a.jsx)("button",{className:"px-3 py-1 rounded-md text-sm ".concat("list"===r?"bg-white dark:bg-gray-600 shadow-sm text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),onClick:()=>n("list"),children:"リスト"})]}),(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",onClick:()=>{m(!1),h(null),x(!0)},children:"+ 新規ノード"})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-1 h-[calc(100vh-16rem)]",children:"graph"===r?(0,a.jsx)(d,{data:{nodes:p,links:f},onSelectNode:e=>{h(e)}}):(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:p.length>0?(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-900",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"ラベル"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"カテゴリ"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"説明"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"作成日"}),(0,a.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,a.jsx)("span",{className:"sr-only",children:"編集"})})]})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:p.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-3 w-3 rounded-full mr-2",style:{backgroundColor:e.color||"#4299e1"}}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.label})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.category||"未分類"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:e.description||"-"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.createdAt).toLocaleDateString()})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-3",onClick:()=>{h(e),m(!0),x(!0)},children:"編集"}),(0,a.jsx)("button",{className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",onClick:()=>v(e.id),children:"削除"})]})]},e.id))})]}):(0,a.jsxs)("div",{className:"text-center p-8 text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("p",{children:"表示するノードがありません。"}),(0,a.jsx)("p",{className:"mt-2",children:"検索条件を変更するか、新しいノードを作成してください。"})]})})}),(0,a.jsx)("div",{className:"mt-4 flex justify-end",children:(0,a.jsx)("button",{className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg text-sm font-medium transition-colors",onClick:()=>{let e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(c,null,2)),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","knowledge-graph.json"),document.body.appendChild(t),t.click(),t.remove()},children:"エクスポート"})})]})}),g&&(0,a.jsx)(o,{title:y?"ノードを編集":"新規ノード作成",onClose:()=>{x(!1),h(null),m(!1)},children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"ラベル"}),(0,a.jsx)("input",{type:"text",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"ノード名を入力",value:(null==u?void 0:u.label)||"",onChange:e=>{u?h({...u,label:e.target.value}):h({id:Date.now().toString(),label:e.target.value,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"説明"}),(0,a.jsx)("textarea",{className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"ノードの詳細説明",rows:3,value:(null==u?void 0:u.description)||"",onChange:e=>{u&&h({...u,description:e.target.value})}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"カテゴリ"}),(0,a.jsxs)("select",{className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:(null==u?void 0:u.category)||"",onChange:e=>{u&&h({...u,category:e.target.value})},children:[(0,a.jsx)("option",{value:"",children:"カテゴリを選択"}),(0,a.jsx)("option",{value:"technology",children:"技術"}),(0,a.jsx)("option",{value:"concept",children:"概念"}),(0,a.jsx)("option",{value:"person",children:"人物"}),(0,a.jsx)("option",{value:"organization",children:"組織"}),(0,a.jsx)("option",{value:"event",children:"イベント"}),(0,a.jsx)("option",{value:"place",children:"場所"}),(0,a.jsx)("option",{value:"discipline",children:"学問"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"カラー"}),(0,a.jsx)("input",{type:"color",className:"w-full h-10 px-1 py-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:(null==u?void 0:u.color)||"#4299e1",onChange:e=>{u&&h({...u,color:e.target.value})}})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)("button",{className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg text-sm font-medium",onClick:()=>{x(!1),h(null),m(!1)},children:"キャンセル"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium",onClick:()=>{u&&u.label&&k({...u,updatedAt:new Date().toISOString()})},disabled:!u||!u.label,children:y?"更新":"作成"})]})]})})})]})}}},function(e){e.O(0,[599,971,69,744],function(){return e(e.s=5812)}),_N_E=e.O()}]);