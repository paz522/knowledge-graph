"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[949],{7949:function(t,e,a){a.r(e),a.d(e,{KnowledgeGraph:function(){return i}});var r=a(3827),l=a(4090),n=a(4529);let s={task:"#22c55e",project:"#3b82f6",meeting:"#a855f7",idea:"#ec4899",note:"#eab308",document:"#64748b",default:"#64748b"},o=[{id:"1",group:"task",label:"Review design mockups"},{id:"2",group:"task",label:"Update documentation"},{id:"3",group:"task",label:"Prepare presentation"},{id:"4",group:"project",label:"Marketing Campaign Q1"},{id:"5",group:"project",label:"Website Redesign"},{id:"6",group:"meeting",label:"Weekly Standup"},{id:"7",group:"meeting",label:"Design Review"},{id:"8",group:"idea",label:"New Feature Concept"},{id:"9",group:"idea",label:"Content Strategy"},{id:"10",group:"note",label:"Research Findings"}],c=[{source:"1",target:"4",value:1},{source:"1",target:"5",value:1},{source:"1",target:"7",value:1},{source:"2",target:"5",value:1},{source:"3",target:"4",value:1},{source:"3",target:"6",value:1},{source:"4",target:"9",value:1},{source:"5",target:"8",value:1},{source:"6",target:"1",value:1},{source:"6",target:"2",value:1},{source:"6",target:"3",value:1},{source:"7",target:"1",value:1},{source:"7",target:"5",value:1},{source:"8",target:"5",value:1},{source:"9",target:"4",value:1},{source:"10",target:"8",value:1},{source:"10",target:"9",value:1}],u={task:"✓",project:"P",meeting:"M",idea:"\uD83D\uDCA1",note:"\uD83D\uDCDD",document:"\uD83D\uDCC4",default:"•"},i=t=>{let{nodes:e=o,links:a=c,width:i="100%",height:g="100%"}=t,p=(0,l.useRef)(null),[d,f]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{f(!0)},[]),(0,l.useEffect)(()=>{if(p.current&&d&&0!==e.length)try{let t=n.Ys(p.current),r=p.current.clientWidth,l=p.current.clientHeight;t.selectAll("*").remove();let o=n.sPX().scaleExtent([.3,3]).on("zoom",t=>{c.attr("transform",t.transform)});t.call(o);let c=t.append("g"),i=n.A4v(e).force("link",n.Fsl(a).id(t=>t.id).distance(150)).force("charge",n.q5i().strength(-700)).force("center",n.wqt(r/2,l/2)).force("collision",n.Hh().radius(70)).force("x",n.RUJ(r/2).strength(.1)).force("y",n.Mrm(l/2).strength(.1)),g=null;i.alpha(.8).alphaDecay(.02),g=setInterval(()=>{.05>i.alpha()&&(i.force("center",n.wqt(r/2,l/2)).force("x",n.RUJ(r/2).strength(.05)).force("y",n.Mrm(l/2).strength(.05)).force("charge",n.q5i().strength(-500)),g&&(clearInterval(g),g=null))},2e3);let d=n.PKp().domain(Object.keys(s)).range(Object.values(s)),f=c.append("g").selectAll("line").data(a).enter().append("line").attr("stroke","hsl(180, 50%, 60%, 0.6)").attr("stroke-opacity",.6).attr("stroke-width",t=>Math.sqrt(t.value)),h=c.append("g").selectAll(".node").data(e).enter().append("g").attr("class","node").call(n.ohM().on("start",function(t,e){t.active||i.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}).on("drag",function(t,e){e.fx=t.x,e.fy=t.y}).on("end",function(t,e){t.active||i.alphaTarget(0),e.fx=null,e.fy=null}));return h.append("circle").attr("r",25).attr("fill",t=>d(t.group)).attr("stroke","#fff").attr("stroke-width",2).attr("opacity",.9),h.append("title").text(t=>{let e=t.tags&&t.tags.length>0?"\nTags: ".concat(t.tags.join(", ")):"";return"".concat(t.label).concat(e)}),h.append("text").attr("dy",35).attr("text-anchor","middle").text(t=>t.label).attr("font-size","10px").attr("fill","#64748b").each(function(t){let e=n.Ys(this),a=t.label||"無題のノード",r=a.split(/\s+/);if(e.text(null),a.length<5)e.append("tspan").attr("x",0).attr("dy","1.2em").text(a);else if(r.length>2){let t=r.slice(0,Math.ceil(r.length/2)).join(" "),a=r.slice(Math.ceil(r.length/2)).join(" ");e.append("tspan").attr("x",0).attr("dy","1.2em").text(t),e.append("tspan").attr("x",0).attr("dy","1.2em").text(a)}else if(a.length>12){let t=Math.ceil(a.length/2);e.append("tspan").attr("x",0).attr("dy","1.2em").text(a.substring(0,t)),e.append("tspan").attr("x",0).attr("dy","1.2em").text(a.substring(t))}else e.append("tspan").attr("x",0).attr("dy","1.2em").text(a)}),h.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-family","sans-serif").attr("font-size","14px").attr("fill","white").text(t=>u[t.group]||u.default),i.on("tick",()=>{e.forEach(t=>{t.x=Math.max(30,Math.min(r-30,t.x)),t.y=Math.max(30,Math.min(l-30,t.y))}),f.attr("x1",t=>t.source.x).attr("y1",t=>t.source.y).attr("x2",t=>t.target.x).attr("y2",t=>t.target.y),h.attr("transform",t=>"translate(".concat(t.x,",").concat(t.y,")"))}),t.on("dblclick.zoom",()=>{t.transition().duration(750).call(o.transform,n.CRH)}),t.call(o.transform,n.CRH.translate(r/2,l/2).scale(.9).translate(-r/2,-l/2)),setTimeout(()=>{i.force("x",n.RUJ(r/2).strength(.05)).force("y",n.Mrm(l/2).strength(.05)).alpha(.3).restart()},3e3),()=>{g&&clearInterval(g),i.stop()}}catch(t){console.error("Error rendering D3 graph:",t)}},[e,a,i,g,d]),(0,r.jsx)("svg",{ref:p,className:"w-full h-full",style:{width:i,height:g,minHeight:"300px"}})};e.default=i}}]);